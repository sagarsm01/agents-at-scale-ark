apiVersion: ark.mckinsey.com/v1alpha1
kind: Query
metadata:
  name: query-overrides-test-query
spec:
  input: What is 2+2? Answer briefly.
  targets:
  - type: agent
    name: query-overrides-test-agent
  overrides:
  - resourceType: model
    labelSelector:
      matchLabels:
        query-override-target: "true"
    headers:
    - name: X-Query-Override-Model-Static
      value:
        value: "query-static-value"
    - name: X-Query-Override-Model-Secret
      value:
        valueFrom:
          secretKeyRef:
            name: query-override-headers
            key: model-auth-token
    - name: X-Query-Override-Model-Configmap
      value:
        valueFrom:
          configMapKeyRef:
            name: query-override-headers
            key: model-consumer-group
  - resourceType: mcpserver
    labelSelector:
      matchLabels:
        mcp-query-override-target: "true"
    headers:
    - name: X-Query-Override-MCP-Static
      value:
        value: "query-mcp-static-value"
    - name: X-Query-Override-MCP-Secret
      value:
        valueFrom:
          secretKeyRef:
            name: query-override-headers
            key: mcp-auth-token
    - name: X-Query-Override-MCP-Configmap
      value:
        valueFrom:
          configMapKeyRef:
            name: query-override-headers
            key: mcp-consumer-group
